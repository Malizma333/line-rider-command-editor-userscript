(()=>{"use strict";var __webpack_modules__={925:(e,t,r)=>{r.d(t,{BC:()=>n,G1:()=>o,p6:()=>s});var a=r(406);const n={[a.n.ZOOM]:{DISPLAY_NAME:"Zoom",FUNC:"getAutoZoom=createZoomer({0},{1});",TEMPLATE:[[0,0,0],1]},[a.n.PAN]:{DISPLAY_NAME:"Pan",FUNC:"getCamBounds=createBoundsPanner({0},{1});",TEMPLATE:[[0,0,0],{w:.4,h:.4,x:0,y:0}]},[a.n.FOCUS]:{DISPLAY_NAME:"Focus",FUNC:"getCamFocus=createFocuser({0},{1});",TEMPLATE:[[0,0,0],[1]]},[a.n.TIME]:{DISPLAY_NAME:"Speed",FUNC:"timeRemapper=createTimeRemapper({0},{1});",TEMPLATE:[[0,0,0],1]},[a.n.SKIN]:{DISPLAY_NAME:"Skin",FUNC:"setCustomRiders({0});",TEMPLATE:{outline:{stroke:"black"},flag:{fill:"#00000066"},skin:{fill:"white"},hair:{fill:"black"},fill:{fill:"black"},eye:{fill:"black"},sled:{fill:"white"},string:{stroke:"black"},armSleeve:{fill:"black"},armHand:{fill:"white"},legPants:{fill:"black"},legFoot:{fill:"white"},torso:{fill:"white"},hatTop:{fill:"white"},hatBottom:{stroke:"black"},hatBall:{fill:"black"},scarf1:{fill:"#FD4F38"},scarf2:{fill:"white"},scarf3:{fill:"#06A725"},scarf4:{fill:"white"},scarf5:{fill:"#3995FD"},id_scarf0:{fill:"white"},id_scarf1:{fill:"#FD4F38"},id_scarf2:{fill:"white"},id_scarf3:{fill:"#06A725"},id_scarf4:{fill:"white"},id_scarf5:{fill:"#3995FD"}}},[a.n.GRAVITY]:{DISPLAY_NAME:"Gravity",TEMPLATE:[[0,0,0],{x:0,y:.175}]},[a.n.LAYER]:{DISPLAY_NAME:"Layer",TEMPLATE:[[0,0,0],{on:1,off:0,offset:0}]}},i={[a.n.ZOOM]:{id:a.n.ZOOM,triggers:[n[a.n.ZOOM].TEMPLATE],smoothing:20},[a.n.PAN]:{id:a.n.PAN,triggers:[n[a.n.PAN].TEMPLATE],smoothing:20},[a.n.FOCUS]:{id:a.n.FOCUS,triggers:[n[a.n.FOCUS].TEMPLATE],smoothing:20},[a.n.TIME]:{id:a.n.TIME,triggers:[n[a.n.TIME].TEMPLATE],interpolate:!1},[a.n.SKIN]:{id:a.n.SKIN,triggers:[n[a.n.SKIN].TEMPLATE]},[a.n.GRAVITY]:{id:a.n.GRAVITY,triggers:[[n[a.n.GRAVITY].TEMPLATE]]},[a.n.LAYER]:{id:a.n.LAYER,triggers:{0:[n[a.n.LAYER].TEMPLATE]},interpolate:!1}},s=[a.n.ZOOM,a.n.PAN,a.n.FOCUS,a.n.TIME,a.n.SKIN,a.n.GRAVITY,a.n.LAYER];class o{constructor(){this.triggerData=o.initialTriggerData,this.undoStack=[],this.redoStack=[]}static get initialTriggerData(){return structuredClone(i)}get data(){return this.triggerData}get undoLen(){return this.undoStack.length}get redoLen(){return this.redoStack.length}updateRiderCount(e){const t=this.triggerData[a.n.FOCUS].triggers;for(const r of t){const t=r[1].length;t<e&&r[1].push(...Array(e-t).fill(0)),t>e&&r[1].splice(e,t-e)}this.triggerData[a.n.FOCUS].triggers=t;const r=this.triggerData[a.n.GRAVITY].triggers,i=r.length;i<e&&r.push(...Array(e-i).fill(null).map((()=>[structuredClone(n[a.n.GRAVITY].TEMPLATE)]))),i>e&&r.splice(e,i-e),this.triggerData[a.n.GRAVITY].triggers=r;const s=this.triggerData[a.n.SKIN].triggers,o=s.length;o<e&&s.push(...Array(e-o).fill(null).map((()=>structuredClone(n[a.n.SKIN].TEMPLATE)))),o>e&&s.splice(e,o-e),this.triggerData[a.n.SKIN].triggers=s}updateLayerMap(e){const t=this.triggerData[a.n.LAYER].triggers,r=new Set(e),i=Object.keys(t).map((e=>parseInt(e))).filter((e=>r.has(e))),s=new Set(i),o={};for(const e of i)o[e]=t[e];for(const t of e)s.has(t)||(o[t]=[structuredClone(n[a.n.LAYER].TEMPLATE)]);this.triggerData[a.n.LAYER].triggers=o}updateFromPath(e,t,r){this.redoStack=[];const a=this.setAtPointer(e,t);this.undoStack.push({modificationPath:e,oldValue:a,activeTab:r}),this.undoStack.length>30&&this.undoStack.shift()}undo(){const e=this.undoStack.pop();if(void 0===e)return a.n.ZOOM;const{modificationPath:t,oldValue:r,activeTab:n}=e,i=this.setAtPointer(t,r);return this.redoStack.push({modificationPath:t,oldValue:i,activeTab:n}),n}redo(){const e=this.redoStack.pop();if(void 0===e)return a.n.ZOOM;const{modificationPath:t,oldValue:r,activeTab:n}=e,i=this.setAtPointer(t,r);return this.undoStack.push({modificationPath:t,oldValue:i,activeTab:n}),n}setAtPointer(e,t){let r=this.triggerData;for(let t=0;t<e.length-1;t+=1)r=r[e[t]];const a=r[e[e.length-1]];return r[e[e.length-1]]=t,a}}},406:(e,t,r)=>{var a;r.d(t,{n:()=>a}),function(e){e.ZOOM="ZOOM",e.PAN="CAMERA_PAN",e.FOCUS="CAMERA_FOCUS",e.TIME="TIME_REMAP",e.SKIN="CUSTOM_SKIN",e.GRAVITY="GRAVITY",e.LAYER="LAYER"}(a||(a={}))},461:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>readJsScript});var _TriggerDataManager__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(925),_TriggerDataManager_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(406),_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(974),_type_guards__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(136);function parseCommand(commandId,scriptSection,triggerData){if(commandId===_TriggerDataManager_types__WEBPACK_IMPORTED_MODULE_1__.n.GRAVITY)throw new Error("Gravity parsing not supported!");if(commandId===_TriggerDataManager_types__WEBPACK_IMPORTED_MODULE_1__.n.LAYER)throw new Error("Layer parsing not supported!");if(void 0===_TriggerDataManager__WEBPACK_IMPORTED_MODULE_0__.BC[commandId].FUNC)throw new Error("Function undefined!");const currentHeader=_TriggerDataManager__WEBPACK_IMPORTED_MODULE_0__.BC[commandId].FUNC.split("(")[0],currentHeaderIndex=scriptSection.indexOf(currentHeader);if(-1===currentHeaderIndex)throw new Error("Command header not found!");const startIndex=currentHeaderIndex+currentHeader.length+1;let endIndex=startIndex;for(let e=1;e>0||endIndex>=scriptSection.length;endIndex+=1)"("===scriptSection.charAt(endIndex+1)&&(e+=1),")"===scriptSection.charAt(endIndex+1)&&(e-=1);const parameterText=`[${removeLeadingZeroes(scriptSection.substring(startIndex,endIndex),commandId)}]`,parameterArray=eval(parameterText),keyframes=parameterArray[0];(0,_type_guards__WEBPACK_IMPORTED_MODULE_3__.vA)(keyframes,_type_guards__WEBPACK_IMPORTED_MODULE_3__.Cq.ARR);let smoothing=0;switch(parameterArray.length>0&&(smoothing=parameterArray[1]),commandId){case _TriggerDataManager_types__WEBPACK_IMPORTED_MODULE_1__.n.ZOOM:triggerData[commandId].triggers=parseZoomTriggers(keyframes),triggerData[commandId].smoothing=parseNumberSmoothing(smoothing);break;case _TriggerDataManager_types__WEBPACK_IMPORTED_MODULE_1__.n.PAN:triggerData[commandId].triggers=parsePanTriggers(keyframes),triggerData[commandId].smoothing=parseNumberSmoothing(smoothing);break;case _TriggerDataManager_types__WEBPACK_IMPORTED_MODULE_1__.n.FOCUS:triggerData[commandId].triggers=parseFocusTriggers(keyframes),triggerData[commandId].smoothing=parseNumberSmoothing(smoothing);break;case _TriggerDataManager_types__WEBPACK_IMPORTED_MODULE_1__.n.TIME:triggerData[commandId].triggers=parseTimeTriggers(keyframes),triggerData[commandId].interpolate=!0===smoothing;break;case _TriggerDataManager_types__WEBPACK_IMPORTED_MODULE_1__.n.SKIN:triggerData[commandId].triggers=parseSkinCss(keyframes)}}function parseZoomTriggers(e){const t=[];for(const r of e){(0,_type_guards__WEBPACK_IMPORTED_MODULE_3__.vA)(r,_type_guards__WEBPACK_IMPORTED_MODULE_3__.Cq.ARR);const e=r[1];(0,_type_guards__WEBPACK_IMPORTED_MODULE_3__.vA)(e,_type_guards__WEBPACK_IMPORTED_MODULE_3__.Cq.NUM);const a=[parseTime(r[0]),e];t.push(a)}return t}function parsePanTriggers(e){const t=[];for(const r of e){(0,_type_guards__WEBPACK_IMPORTED_MODULE_3__.vA)(r,_type_guards__WEBPACK_IMPORTED_MODULE_3__.Cq.ARR);const e=r[1];(0,_type_guards__WEBPACK_IMPORTED_MODULE_3__.vA)(e,_type_guards__WEBPACK_IMPORTED_MODULE_3__.Cq.RECORD);const{x:a,y:n,w:i,h:s}=e;(0,_type_guards__WEBPACK_IMPORTED_MODULE_3__.vA)(a,_type_guards__WEBPACK_IMPORTED_MODULE_3__.Cq.NUM),(0,_type_guards__WEBPACK_IMPORTED_MODULE_3__.vA)(n,_type_guards__WEBPACK_IMPORTED_MODULE_3__.Cq.NUM),(0,_type_guards__WEBPACK_IMPORTED_MODULE_3__.vA)(i,_type_guards__WEBPACK_IMPORTED_MODULE_3__.Cq.NUM),(0,_type_guards__WEBPACK_IMPORTED_MODULE_3__.vA)(s,_type_guards__WEBPACK_IMPORTED_MODULE_3__.Cq.NUM);const o=[parseTime(r[0]),{x:a,y:n,w:i,h:s}];t.push(o)}return t}function parseFocusTriggers(e){const t=[];for(const r of e){(0,_type_guards__WEBPACK_IMPORTED_MODULE_3__.vA)(r,_type_guards__WEBPACK_IMPORTED_MODULE_3__.Cq.ARR);const e=r[1];(0,_type_guards__WEBPACK_IMPORTED_MODULE_3__.vA)(e,_type_guards__WEBPACK_IMPORTED_MODULE_3__.Cq.NUM_ARR);const a=[parseTime(r[0]),e];t.push(a)}return t}function parseTimeTriggers(e){const t=[];for(const r of e){(0,_type_guards__WEBPACK_IMPORTED_MODULE_3__.vA)(r,_type_guards__WEBPACK_IMPORTED_MODULE_3__.Cq.ARR);const e=r[1];(0,_type_guards__WEBPACK_IMPORTED_MODULE_3__.vA)(e,_type_guards__WEBPACK_IMPORTED_MODULE_3__.Cq.NUM);const a=[parseTime(r[0]),e];t.push(a)}return t}function parseNumberSmoothing(e){return null==e?20:((0,_type_guards__WEBPACK_IMPORTED_MODULE_3__.vA)(e,_type_guards__WEBPACK_IMPORTED_MODULE_3__.Cq.NUM),Math.max(0,e))}function parseSkinCss(e){var t;(0,_type_guards__WEBPACK_IMPORTED_MODULE_3__.vA)(e,_type_guards__WEBPACK_IMPORTED_MODULE_3__.Cq.STR_ARR);const r=[];return e.forEach(((e,t)=>{r.push(structuredClone(_TriggerDataManager__WEBPACK_IMPORTED_MODULE_0__.BC[_TriggerDataManager_types__WEBPACK_IMPORTED_MODULE_1__.n.SKIN].TEMPLATE));let a=0,n=0;for(let i=0;i<e.length;i+=1)"{"===e.charAt(i)&&(a+=1),"}"===e.charAt(i)&&(a-=1,0===a&&(r[t]=parseSkinProp(e.substring(n,i+1).replace(/\s/g,"")),n=i+1))})),r.length>0&&r.push(null!==(t=r.shift())&&void 0!==t?t:_TriggerDataManager__WEBPACK_IMPORTED_MODULE_0__.BC[_TriggerDataManager_types__WEBPACK_IMPORTED_MODULE_1__.n.SKIN].TEMPLATE),r}function parseSkinProp(e){const t={},r=/(['"])?([#]?[a-z0-9A-Z_-]+)(['"])?/g;return Object.entries({outline:".outline",flag:".flag",skin:".skin",hair:".hair",fill:".fill",eye:"#eye",sled:".sled",string:"#string",armSleeve:".arm.sleeve",armHand:".arm.hand",legPants:".leg.pants",legFoot:".leg.foot",torso:".torso",hatTop:".hat.top",hatBottom:".hat.bottom",hatBall:".hat.ball",scarf1:".scarf1",scarf2:".scarf2",scarf3:".scarf3",scarf4:".scarf4",scarf5:".scarf5",id_scarf0:"#scarf0",id_scarf1:"#scarf1",id_scarf2:"#scarf2",id_scarf3:"#scarf3",id_scarf4:"#scarf4",id_scarf5:"#scarf5"}).forEach((([a,n])=>{if(!e.startsWith(n))return;const i=JSON.parse(e.substring(n.length).replace(r,'"$2"').replace(";",","));a in t||(t[a]={}),void 0!==i.fill&&(t[a].fill=i.fill),void 0!==i.stroke&&(t[a].stroke=i.stroke)})),t}function removeLeadingZeroes(e,t){return t===_TriggerDataManager_types__WEBPACK_IMPORTED_MODULE_1__.n.SKIN?e:e.replace(/([^\d.+-])0+(\d+)/g,"$1$2")}function readJsScript(e,t){const r=_TriggerDataManager__WEBPACK_IMPORTED_MODULE_0__.G1.initialTriggerData,a=e.replace(/\s/g,"");return _TriggerDataManager__WEBPACK_IMPORTED_MODULE_0__.p6.forEach((e=>{try{r[e].triggers=[],parseCommand(e,a,r)}catch(a){if(a instanceof Error)switch(console.error(`[ScriptParser.parseScript()] ${a.message}`),e){case _TriggerDataManager_types__WEBPACK_IMPORTED_MODULE_1__.n.ZOOM:case _TriggerDataManager_types__WEBPACK_IMPORTED_MODULE_1__.n.PAN:case _TriggerDataManager_types__WEBPACK_IMPORTED_MODULE_1__.n.FOCUS:case _TriggerDataManager_types__WEBPACK_IMPORTED_MODULE_1__.n.TIME:case _TriggerDataManager_types__WEBPACK_IMPORTED_MODULE_1__.n.GRAVITY:case _TriggerDataManager_types__WEBPACK_IMPORTED_MODULE_1__.n.LAYER:r[e]=structuredClone(t[e])}}})),r}function parseTime(e){let t=[0,0,0];if((0,_type_guards__WEBPACK_IMPORTED_MODULE_3__.z6)(e,_type_guards__WEBPACK_IMPORTED_MODULE_3__.Cq.NUM)){const r=e;t=(0,_util__WEBPACK_IMPORTED_MODULE_2__.nC)(r)}else if((0,_type_guards__WEBPACK_IMPORTED_MODULE_3__.vA)(e,_type_guards__WEBPACK_IMPORTED_MODULE_3__.Cq.NUM_ARR),1===e.length){const r=e[0];t=(0,_util__WEBPACK_IMPORTED_MODULE_2__.nC)(r)}else if(2===e.length){const r=40*e[0]+e[1];t=(0,_util__WEBPACK_IMPORTED_MODULE_2__.nC)(r)}else{const r=2400*e[0]+40*e[1]+e[2];t=(0,_util__WEBPACK_IMPORTED_MODULE_2__.nC)(r)}return t}},136:(e,t,r)=>{var a;function n(e){return"number"==typeof e}function i(e){return"string"==typeof e}function s(e){return Array.isArray(e)}function o(e){return s(e)&&e.every((e=>i(e)))}function g(e){return s(e)&&e.every((e=>n(e)))}function l(e){return"object"==typeof e&&null!==e&&o(Object.keys(e))}function c(e,t){const r=`Assertion failed: ${e} was not ${t}`;switch(t){case a.NUM:if(!n(e))throw new Error(r);break;case a.STR:if(!i(e))throw new Error(r);break;case a.ARR:if(!s(e))throw new Error(r);break;case a.RECORD:if(!l(e))throw new Error(r);break;case a.NUM_ARR:if(!g(e))throw new Error(r);break;case a.STR_ARR:if(!o(e))throw new Error(r)}}function _(e,t){switch(t){case a.NUM:if(!n(e))return!1;break;case a.STR:if(!i(e))return!1;break;case a.ARR:if(!s(e))return!1;break;case a.RECORD:if(!l(e))return!1;break;case a.NUM_ARR:if(!g(e))return!1;break;case a.STR_ARR:if(!o(e))return!1}return!0}r.d(t,{Cq:()=>a,vA:()=>c,z6:()=>_}),function(e){e.STR="string",e.NUM="number",e.ARR="Array",e.NUM_ARR="Array<number>",e.STR_ARR="Array<string>",e.RECORD="Record<string>"}(a||(a={}))},974:(e,t,r)=>{r.d(t,{Hk:()=>l,P:()=>s,Qx:()=>o,Z3:()=>i,hw:()=>c,nC:()=>g});var a=r(406),n=r(925);function i(e,t,r,n){return t===a.n.GRAVITY?e[t].triggers[r]:t===a.n.LAYER?e[t].triggers[n]:e[t].triggers}function s(e){const t=Array(e.length).fill(!1),r=e[0][0];0===r[0]&&0===r[1]&&0===r[2]||(t[0]=!0);for(let r=0;r<e.length-1;r+=1){const a=e[r][0],n=e[r+1][0];40*(60*a[0]+a[1])+a[2]>=40*(60*n[0]+n[1])+n[2]&&(t[r+1]=!0)}return t}function o(e){var t;const r="#ffffffff",a=e.map((e=>{var t,a,n,i,s,o,g,l,c,_,p,d,u,E,h,m,y,T,f,S,R,M,O,A,C,D,v;return[` .outline {stroke: ${null!==(t=e.outline.stroke)&&void 0!==t?t:r}}`,` .skin {fill: ${null!==(a=e.skin.fill)&&void 0!==a?a:r}}`,` .hair {fill: ${null!==(n=e.hair.fill)&&void 0!==n?n:r}}`,` .fill {fill: ${null!==(i=e.fill.fill)&&void 0!==i?i:r}}`,` #eye {fill: ${null!==(s=e.eye.fill)&&void 0!==s?s:r}}`,` .sled {fill: ${null!==(o=e.sled.fill)&&void 0!==o?o:r}}`,` #string {stroke: ${null!==(g=e.string.stroke)&&void 0!==g?g:r}}`,` .arm .sleeve {fill: ${null!==(l=e.armSleeve.fill)&&void 0!==l?l:r}}`,` .arm .hand {fill: ${null!==(c=e.armHand.fill)&&void 0!==c?c:r}}`,` .leg .pants {fill: ${null!==(_=e.legPants.fill)&&void 0!==_?_:r}}`,` .leg .foot {fill: ${null!==(p=e.legFoot.fill)&&void 0!==p?p:r}}`,` .torso {fill: ${null!==(d=e.torso.fill)&&void 0!==d?d:r}}`,` .scarf1 {fill: ${null!==(u=e.scarf1.fill)&&void 0!==u?u:r}}`,` .scarf2 {fill: ${null!==(E=e.scarf2.fill)&&void 0!==E?E:r}}`,` .scarf3 {fill: ${null!==(h=e.scarf3.fill)&&void 0!==h?h:r}}`,` .scarf4 {fill: ${null!==(m=e.scarf4.fill)&&void 0!==m?m:r}}`,` .scarf5 {fill: ${null!==(y=e.scarf5.fill)&&void 0!==y?y:r}}`,` #scarf0 {fill: ${null!==(T=e.id_scarf0.fill)&&void 0!==T?T:r}}`,` #scarf1 {fill: ${null!==(f=e.id_scarf1.fill)&&void 0!==f?f:r}}`,` #scarf2 {fill: ${null!==(S=e.id_scarf2.fill)&&void 0!==S?S:r}}`,` #scarf3 {fill: ${null!==(R=e.id_scarf3.fill)&&void 0!==R?R:r}}`,` #scarf4 {fill: ${null!==(M=e.id_scarf4.fill)&&void 0!==M?M:r}}`,` #scarf5 {fill: ${null!==(O=e.id_scarf5.fill)&&void 0!==O?O:r}}`,` .hat .top {fill: ${null!==(A=e.hatTop.fill)&&void 0!==A?A:r}}`,` .hat .bottom {stroke: ${null!==(C=e.hatBottom.stroke)&&void 0!==C?C:r}}`,` .hat .ball {fill: ${null!==(D=e.hatBall.fill)&&void 0!==D?D:r}}`,` .flag {fill: ${null!==(v=e.flag.fill)&&void 0!==v?v:r}}`].join("").replace(/\n/g,"")}));return a.unshift(null!==(t=a.pop())&&void 0!==t?t:""),a}function g(e){const t=e%40,r=Math.floor(e/40)%60;return[Math.floor(e/2400),r,t]}function l(e){return 2400*e[0]+40*e[1]+e[2]}function c(e,t){const r=n.BC[e].FUNC;if(void 0===r)return"";switch(e){case a.n.FOCUS:case a.n.PAN:case a.n.ZOOM:{const a=t[e];return r.replace("{0}",JSON.stringify(a.triggers)).replace("{1}",String(a.smoothing)).replace(" ","")}case a.n.TIME:{const a=t[e];return r.replace("{0}",JSON.stringify(a.triggers)).replace("{1}",String(a.interpolate)).replace(" ","")}case a.n.SKIN:{const a=t[e];return r.replace("{0}",JSON.stringify(o(a.triggers))).replace(" ","")}default:return""}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};const COLOR={gray50:"oklch(0.985 0.002 247.839)",gray100:"oklch(0.967 0.003 264.542)",gray200:"oklch(0.928 0.006 264.531)",gray300:"oklch(0.872 0.01 258.338)",gray400:"oklch(0.707 0.022 261.325)",gray500:"oklch(0.551 0.027 264.364)",gray600:"oklch(0.446 0.03 256.802)",gray700:"oklch(0.373 0.034 259.733)",gray800:"oklch(0.278 0.033 256.848)",gray900:"oklch(0.21 0.034 264.665)",gray950:"oklch(0.13 0.028 261.692)"},THEME={primaryBorder:`2px solid ${COLOR.gray950}`},GLOBAL_STYLES={root:{backgroundColor:COLOR.gray200,border:THEME.primaryBorder,color:COLOR.gray900,fontFamily:"Helvetica",fontWeight:"bold",left:"64px",opacity:0,overflow:"hidden",padding:"3px",pointerEvents:"none",position:"fixed",top:"8px",transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},actionContainer:{alignItems:"center",display:"flex",width:"100%"},mainContent:{alignItems:"center",display:"flex",height:"50vh",flexDirection:"column",justifyContent:"center",width:"max(37.5vw, 600px)"},windowContainer:{display:"flex",height:"100%",flexDirection:"column",width:"100%"},windowHead:{alignItems:"center",backgroundColor:COLOR.gray100,border:THEME.primaryBorder,borderBottom:"none",display:"flex",fontSize:"1.5em",height:"2.5em",justifyContent:"start"},windowBody:{backgroundColor:COLOR.gray300,border:THEME.primaryBorder,boxShadow:"inset 0px 0px 8px 0px #000",display:"flex",flex:1,flexDirection:"column",overflowY:"scroll",scrollbarColor:`${COLOR.gray500} ${COLOR.gray200}`,scrollbarWidth:"thin"},triggerContainer:{alignItems:"start",backgroundColor:COLOR.gray100,borderBottom:THEME.primaryBorder,boxShadow:"0px 4px 8px -4px #000",display:"flex",flexDirection:"column",padding:"0.75em",position:"relative"},triggerActionContainer:{alignItems:"center",display:"flex",flexDirection:"row",direction:"ltr",justifyContent:"space-between",position:"absolute",right:"0px"},triggerRowContainer:{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"center"},triggerPropContainer:{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"start",marginBottom:"5px",width:"100%",whiteSpace:"nowrap"},spacedProperty:{margin:"0 5px"},createTriggerContainer:{bottom:"0px",display:"flex",justifyContent:"center",left:"0px",marginLeft:"auto",marginRight:"auto",position:"absolute",right:"0px",transform:"translateY(50%)",zIndex:1},tabContainer:{alignItems:"end",display:"flex",justifyContent:"start",flexDirection:"row",width:"100%"},tabButton:{borderRadius:"5px 5px 0px 0px",marginRight:"-2px",transform:"translateY(2px)",zIndex:1}};var TriggerDataManager=__webpack_require__(925),TriggerDataManager_types=__webpack_require__(406),read_js_script=__webpack_require__(461),util=__webpack_require__(974),type_guards=__webpack_require__(136),SETTINGS_KEY,VIEWPORT_SETTING,FONT_SIZE_SETTING;function parseV0Command(e,t,r){const a=t[e];switch((0,type_guards.vA)(a,type_guards.Cq.RECORD),(0,type_guards.vA)(a.triggers,type_guards.Cq.ARR),e){case TriggerDataManager_types.n.ZOOM:r[e].triggers=parseZoomTriggers(a.triggers),r[e].smoothing=parseNumberSmoothing(a.smoothing);break;case TriggerDataManager_types.n.PAN:r[e].triggers=parsePanTriggers(a.triggers),r[e].smoothing=parseNumberSmoothing(a.smoothing);break;case TriggerDataManager_types.n.FOCUS:r[e].triggers=parseFocusTriggers(a.triggers),r[e].smoothing=parseNumberSmoothing(a.smoothing);break;case TriggerDataManager_types.n.TIME:r[e].triggers=parseTimeTriggers(a.triggers),r[e].interpolate=parseBooleanSmoothing(a.interpolate);break;case TriggerDataManager_types.n.SKIN:r[e].triggers=parseSkinTriggers(a.triggers);break;case TriggerDataManager_types.n.GRAVITY:r[e].triggers=parseGravityTriggers(a.triggers);break;case TriggerDataManager_types.n.LAYER:r[e].triggers=parseLayerTriggers(a.triggers),r[e].interpolate=parseBooleanSmoothing(a.interpolate)}}function parseZoomTriggers(e){const t=[];for(const r of e){(0,type_guards.vA)(r,type_guards.Cq.ARR);const e=r[1];(0,type_guards.vA)(e,type_guards.Cq.NUM);const a=[parseTime(r[0]),e];t.push(a)}return t}function parsePanTriggers(e){const t=[];for(const r of e){(0,type_guards.vA)(r,type_guards.Cq.ARR);const e=r[1];(0,type_guards.vA)(e,type_guards.Cq.RECORD);const{x:a,y:n,w:i,h:s}=e;(0,type_guards.vA)(a,type_guards.Cq.NUM),(0,type_guards.vA)(n,type_guards.Cq.NUM),(0,type_guards.vA)(i,type_guards.Cq.NUM),(0,type_guards.vA)(s,type_guards.Cq.NUM);const o=[parseTime(r[0]),{x:a,y:n,w:i,h:s}];t.push(o)}return t}function parseFocusTriggers(e){const t=[];for(const r of e){(0,type_guards.vA)(r,type_guards.Cq.ARR);const e=r[1];(0,type_guards.vA)(e,type_guards.Cq.NUM_ARR);const a=[parseTime(r[0]),e];t.push(a)}return t}function parseTimeTriggers(e){const t=[];for(const r of e){(0,type_guards.vA)(r,type_guards.Cq.ARR);const e=r[1];(0,type_guards.vA)(e,type_guards.Cq.NUM);const a=[parseTime(r[0]),e];t.push(a)}return t}function parseNumberSmoothing(e){return null==e?20:((0,type_guards.vA)(e,type_guards.Cq.NUM),Math.max(0,e))}function parseBooleanSmoothing(e){if(null==e)return!1;if(!0!==e&&!1!==e)throw new Error("Invalid boolean smoothing value!");return e}function parseSkinTriggers(e){const t=[];for(const r of e){(0,type_guards.vA)(r,type_guards.Cq.RECORD);const e=structuredClone(TriggerDataManager.BC[TriggerDataManager_types.n.SKIN].TEMPLATE);for(const t of Object.keys(e))(0,type_guards.vA)(r[t],type_guards.Cq.RECORD),(0,type_guards.z6)(r[t].fill,type_guards.Cq.STR)&&(e[t].fill=r[t].fill),(0,type_guards.z6)(r[t].stroke,type_guards.Cq.STR)&&(e[t].stroke=r[t].stroke);t.push(e)}return t}function parseGravityTriggers(e){const t=[];for(const r of e){if((0,type_guards.vA)(r,type_guards.Cq.ARR),(0,type_guards.vA)(r[0],type_guards.Cq.NUM_ARR),r[0].length<3)throw new Error("Trigger time did not have valid length!");const e=[r[0][0],r[0][1],r[0][2]];(0,type_guards.vA)(r[1],type_guards.Cq.ARR);for(let a=0;a<r[1].length;a++){const n=r[1][a];for((0,type_guards.vA)(n,type_guards.Cq.RECORD),(0,type_guards.vA)(n.x,type_guards.Cq.NUM),(0,type_guards.vA)(n.y,type_guards.Cq.NUM);t.length<=a;)t.push([]);t[a].push([e,{x:n.x,y:n.y}])}}return t}function parseLayerTriggers(e){const t={};for(const r of e){if((0,type_guards.vA)(r,type_guards.Cq.ARR),(0,type_guards.vA)(r[0],type_guards.Cq.NUM_ARR),r[0].length<3)throw new Error("Trigger time did not have valid length!");const e=[r[0][0],r[0][1],r[0][2]],a=r[1];(0,type_guards.vA)(a,type_guards.Cq.RECORD),(0,type_guards.vA)(a.id,type_guards.Cq.NUM),(0,type_guards.vA)(a.on,type_guards.Cq.NUM),(0,type_guards.vA)(a.off,type_guards.Cq.NUM),(0,type_guards.vA)(a.offset,type_guards.Cq.NUM),a.id in t||(t[a.id]=[]),t[a.id].push([e,{on:a.on,off:a.off,offset:a.offset}])}return t}function parseTime(e){let t=[0,0,0];if((0,type_guards.z6)(e,type_guards.Cq.NUM)){const r=e;t=(0,util.nC)(r)}else if((0,type_guards.vA)(e,type_guards.Cq.NUM_ARR),1===e.length){const r=e[0];t=(0,util.nC)(r)}else if(2===e.length){const r=40*e[0]+e[1];t=(0,util.nC)(r)}else{const r=2400*e[0]+40*e[1]+e[2];t=(0,util.nC)(r)}return t}function parseV1Command(e,t,r){const a=t[e];if((0,type_guards.vA)(a,type_guards.Cq.RECORD),e===TriggerDataManager_types.n.LAYER)return(0,type_guards.vA)(a.triggers,type_guards.Cq.RECORD),r[e].triggers=read_json_v1_script_parseLayerTriggers(a.triggers),void(r[e].interpolate=read_json_v1_script_parseBooleanSmoothing(a.interpolate));switch((0,type_guards.vA)(a.triggers,type_guards.Cq.ARR),e){case TriggerDataManager_types.n.ZOOM:r[e].triggers=read_json_v1_script_parseZoomTriggers(a.triggers),r[e].smoothing=read_json_v1_script_parseNumberSmoothing(a.smoothing);break;case TriggerDataManager_types.n.PAN:r[e].triggers=read_json_v1_script_parsePanTriggers(a.triggers),r[e].smoothing=read_json_v1_script_parseNumberSmoothing(a.smoothing);break;case TriggerDataManager_types.n.FOCUS:r[e].triggers=read_json_v1_script_parseFocusTriggers(a.triggers),r[e].smoothing=read_json_v1_script_parseNumberSmoothing(a.smoothing);break;case TriggerDataManager_types.n.TIME:r[e].triggers=read_json_v1_script_parseTimeTriggers(a.triggers),r[e].interpolate=read_json_v1_script_parseBooleanSmoothing(a.interpolate);break;case TriggerDataManager_types.n.SKIN:r[e].triggers=read_json_v1_script_parseSkinTriggers(a.triggers);break;case TriggerDataManager_types.n.GRAVITY:r[e].triggers=read_json_v1_script_parseGravityTriggers(a.triggers)}}function read_json_v1_script_parseZoomTriggers(e){const t=[];for(const r of e){(0,type_guards.vA)(r,type_guards.Cq.NUM_ARR);const e=[(0,util.nC)(r[0]),r[1]];t.push(e)}return t}function read_json_v1_script_parsePanTriggers(e){const t=[];for(const r of e){(0,type_guards.vA)(r,type_guards.Cq.NUM_ARR);const[e,a,n,i,s]=r,o=[(0,util.nC)(e),{x:i,y:s,w:a,h:n}];t.push(o)}return t}function read_json_v1_script_parseFocusTriggers(e){const t=[];for(const r of e){(0,type_guards.vA)(r,type_guards.Cq.ARR);const[e,a]=r;(0,type_guards.vA)(e,type_guards.Cq.NUM),(0,type_guards.vA)(a,type_guards.Cq.NUM_ARR);const n=[(0,util.nC)(e),a];t.push(n)}return t}function read_json_v1_script_parseTimeTriggers(e){const t=[];for(const r of e){(0,type_guards.vA)(r,type_guards.Cq.NUM_ARR);const e=[(0,util.nC)(r[0]),r[1]];t.push(e)}return t}function read_json_v1_script_parseNumberSmoothing(e){return null==e?20:((0,type_guards.vA)(e,type_guards.Cq.NUM),Math.max(0,e))}function read_json_v1_script_parseBooleanSmoothing(e){if(null==e)return!1;if(!0!==e&&!1!==e)throw new Error("Invalid boolean smoothing value!");return e}function read_json_v1_script_parseSkinTriggers(e){const t=[];for(const r of e){(0,type_guards.vA)(r,type_guards.Cq.RECORD);const e=structuredClone(TriggerDataManager.BC[TriggerDataManager_types.n.SKIN].TEMPLATE);for(const t of Object.keys(e))(0,type_guards.vA)(r[t],type_guards.Cq.RECORD),(0,type_guards.z6)(r[t].fill,type_guards.Cq.STR)&&(e[t].fill=r[t].fill),(0,type_guards.z6)(r[t].stroke,type_guards.Cq.STR)&&(e[t].stroke=r[t].stroke);t.push(e)}return t}function read_json_v1_script_parseGravityTriggers(e){const t=[];for(const r of e){(0,type_guards.vA)(r,type_guards.Cq.ARR);const e=[];for(const t of r){(0,type_guards.vA)(t,type_guards.Cq.NUM_ARR);const r=[(0,util.nC)(t[0]),{x:t[1],y:t[2]}];e.push(r)}t.push(e)}return t}function read_json_v1_script_parseLayerTriggers(e){const t={};for(const r of Object.keys(e)){const a=parseInt(r);t[a]=[];const n=e[r];(0,type_guards.vA)(n,type_guards.Cq.ARR);for(const e of n)(0,type_guards.vA)(e,type_guards.Cq.NUM_ARR),t[a].push([(0,util.nC)(e[0]),{on:e[1],off:e[2],offset:e[3]}])}return t}function readJsonScript(e,t){const r=TriggerDataManager.G1.initialTriggerData;let a=-1;if((0,type_guards.vA)(e,type_guards.Cq.RECORD),void 0===e.version||0===e.version)a=0;else{if(1!==e.version)return console.error("[ScriptParser.parseScript()] Invalid file version!"),t;a=1}return TriggerDataManager.p6.forEach((n=>{try{switch(r[n].triggers=[],a){case 0:parseV0Command(n,e,r);break;case 1:parseV1Command(n,e,r)}}catch(e){if(e instanceof Error)switch(console.error(`[ScriptParser.parseScript()] ${e.message}`),n){case TriggerDataManager_types.n.ZOOM:case TriggerDataManager_types.n.PAN:case TriggerDataManager_types.n.FOCUS:case TriggerDataManager_types.n.TIME:case TriggerDataManager_types.n.GRAVITY:case TriggerDataManager_types.n.LAYER:r[n]=structuredClone(t[n])}}})),r}function writeJsonScript(e){return{version:1,[TriggerDataManager_types.n.ZOOM]:{smoothing:e[TriggerDataManager_types.n.ZOOM].smoothing,triggers:e[TriggerDataManager_types.n.ZOOM].triggers.map((e=>[(0,util.Hk)(e[0]),e[1]]))},[TriggerDataManager_types.n.PAN]:{smoothing:e[TriggerDataManager_types.n.PAN].smoothing,triggers:e[TriggerDataManager_types.n.PAN].triggers.map((e=>[(0,util.Hk)(e[0]),e[1].w,e[1].h,e[1].x,e[1].y]))},[TriggerDataManager_types.n.FOCUS]:{smoothing:e[TriggerDataManager_types.n.FOCUS].smoothing,triggers:e[TriggerDataManager_types.n.FOCUS].triggers.map((e=>[(0,util.Hk)(e[0]),e[1].map((e=>e))]))},[TriggerDataManager_types.n.TIME]:{interpolate:e[TriggerDataManager_types.n.TIME].interpolate,triggers:e[TriggerDataManager_types.n.TIME].triggers.map((e=>[(0,util.Hk)(e[0]),e[1]]))},[TriggerDataManager_types.n.SKIN]:{triggers:e[TriggerDataManager_types.n.SKIN].triggers.map((e=>Object.fromEntries(Object.entries(e).map((([e,t])=>[e,{fill:t.fill,stroke:t.stroke}])))))},[TriggerDataManager_types.n.GRAVITY]:{triggers:e[TriggerDataManager_types.n.GRAVITY].triggers.map((e=>e.map((e=>[(0,util.Hk)(e[0]),e[1].x,e[1].y]))))},[TriggerDataManager_types.n.LAYER]:{interpolate:e[TriggerDataManager_types.n.LAYER].interpolate,triggers:Object.fromEntries(Object.entries(e[TriggerDataManager_types.n.LAYER].triggers).map((([e,t])=>[e,t.map((e=>[(0,util.Hk)(e[0]),e[1].on,e[1].off,e[1].offset]))])))}}}!function(e){e[e.VIEWPORT=0]="VIEWPORT",e[e.FONT_SIZE=1]="FONT_SIZE"}(SETTINGS_KEY||(SETTINGS_KEY={})),function(e){e[e.HD=0]="HD",e[e.FHD=1]="FHD",e[e.QHD=2]="QHD",e[e.UHD=3]="UHD"}(VIEWPORT_SETTING||(VIEWPORT_SETTING={})),function(e){e[e.SMALL=0]="SMALL",e[e.MEDIUM=1]="MEDIUM",e[e.LARGE=2]="LARGE"}(FONT_SIZE_SETTING||(FONT_SIZE_SETTING={}));const LOCAL_STORAGE_PREFIX="CMD_EDITOR_MOD_",DEFAULTS={[SETTINGS_KEY.FONT_SIZE]:FONT_SIZE_SETTING.MEDIUM,[SETTINGS_KEY.VIEWPORT]:VIEWPORT_SETTING.HD},TEXT_SIZES={[FONT_SIZE_SETTING.SMALL]:"12px",[FONT_SIZE_SETTING.MEDIUM]:"14px",[FONT_SIZE_SETTING.LARGE]:"16px"};function getSetting(e){const t=window.localStorage.getItem(LOCAL_STORAGE_PREFIX+e);if(!t)return DEFAULTS[e];const r=parseInt(t,10);return isNaN(r)?DEFAULTS[e]:r}function saveSetting(e,t){window.localStorage.setItem(LOCAL_STORAGE_PREFIX+e,String(t))}function setPlaybackDimensions(e){return{type:"SET_PLAYBACK_DIMENSIONS",payload:e}}function closeSidebar(){return{type:"SET_VIEWS",payload:{Sidebar:null},meta:{name:"SET_SIDEBAR_PAGE",auto:!1}}}function getSimulatorTrack(e){return e.simulator.engine}function getWindowFocused(e){return!!e.views.Main}function getPlayerRunning(e){return e.player.running}function getCurrentScript(e){return e.trackData.script}function getNumRiders(e){return e.simulator.engine.engine.state.riders.length}function getPlayerIndex(e){return e.player.index}function getSidebarOpen(e){return!!e.views.Sidebar}function getTrackTitle(e){return e.trackData.label}function getEditorZoom(e){return e.camera.editorZoom}function getEditorPosition(e){return e.camera.editorPosition}function getPlaybackZoom(e){return window.getAutoZoom?window.getAutoZoom(getPlayerIndex(e)):e.camera.playbackZoom}function getPlaybackDimensions(e){return e.camera.playbackDimensions||e.camera.editorDimensions}function getLayerIds(e){return e.simulator.committedEngine.engine.state.layers.toArray().map((e=>e.id))}const{React}=window,svgStyle={fill:"none",height:"1em",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",style:{position:"absolute"},viewBox:"0 0 24 24",width:"1em"},DOWNLOAD=React.createElement("svg",Object.assign({},svgStyle),React.createElement("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),React.createElement("polyline",{points:"7 10 12 15 17 10"}),React.createElement("line",{x1:"12",y1:"15",x2:"12",y2:"3"})),CORNER_UP_RIGHT=React.createElement("svg",Object.assign({},svgStyle),React.createElement("polyline",{points:"15 14 20 9 15 4"}),React.createElement("path",{d:"M4 20v-7a4 4 0 0 1 4-4h12"})),PLAY=React.createElement("svg",Object.assign({},svgStyle),React.createElement("polygon",{points:"5 3 19 12 5 21 5 3"})),COPY=React.createElement("svg",Object.assign({},svgStyle),React.createElement("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),React.createElement("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})),UPLOAD=React.createElement("svg",Object.assign({},svgStyle),React.createElement("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),React.createElement("polyline",{points:"17 8 12 3 7 8"}),React.createElement("line",{x1:"12",y1:"3",x2:"12",y2:"15"})),SETTINGS=React.createElement("svg",Object.assign({},svgStyle),React.createElement("circle",{cx:"12",cy:"12",r:"3"}),React.createElement("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})),HELP_CIRCLE=React.createElement("svg",Object.assign({},svgStyle),React.createElement("circle",{cx:"12",cy:"12",r:"10"}),React.createElement("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),React.createElement("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})),MINIMIZE=React.createElement("svg",Object.assign({},svgStyle),React.createElement("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})),MAXIMIZE=React.createElement("svg",Object.assign({},svgStyle),React.createElement("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})),PLUS=React.createElement("svg",Object.assign({},svgStyle),React.createElement("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),React.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"})),PLUS_CIRCLE=React.createElement("svg",Object.assign({},svgStyle),React.createElement("circle",{cx:"12",cy:"12",r:"10"}),React.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),React.createElement("line",{x1:"8",y1:"12",x2:"16",y2:"12"})),X=React.createElement("svg",Object.assign({},svgStyle),React.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),React.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),TRASH2=React.createElement("svg",Object.assign({},svgStyle),React.createElement("polyline",{points:"3 6 5 6 21 6"}),React.createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),React.createElement("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),React.createElement("line",{x1:"14",y1:"11",x2:"14",y2:"17"})),ARROW_LEFT=React.createElement("svg",Object.assign({},svgStyle),React.createElement("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),React.createElement("polyline",{points:"12 19 5 12 12 5"})),ARROW_RIGHT=React.createElement("svg",Object.assign({},svgStyle),React.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),React.createElement("polyline",{points:"12 5 19 12 12 19"})),CAMERA=React.createElement("svg",Object.assign({},svgStyle),React.createElement("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),React.createElement("circle",{cx:"12",cy:"13",r:"4"})),{React:FloatPicker_React}=window;function clampFloat(e,t,r,a,n){if(r){const e=Number(t);return isNaN(e)?a.toString():Math.min(n,Math.max(a,e)).toString()}return new RegExp("^[+-]?([0-9]*[.])?[0-9]*$").test(t)?t:e}const style={backgroundColor:COLOR.gray50,border:THEME.primaryBorder,borderRadius:"5px",boxShadow:"inset 0px 1px 4px -1px #000",height:"1.25em",padding:"5px",textAlign:"right",width:"3em"};class FloatPicker extends FloatPicker_React.Component{constructor(e){super(e),this.state={value:e.value}}onSet(e,t){const r=void 0===this.props.min?-Number.MAX_SAFE_INTEGER:this.props.min,a=void 0===this.props.max?Number.MAX_SAFE_INTEGER:this.props.max,n=clampFloat(this.state.value,e.target.value,t,r,a);this.setState({value:n}),t&&this.props.onChange(parseFloat(n))}componentWillReceiveProps(e){this.setState({value:e.value})}render(){const{customStyle:e,id:t}=this.props;return FloatPicker_React.createElement("input",{style:Object.assign(Object.assign({},style),e),id:t,value:this.state.value,min:this.props.min,max:this.props.max,onChange:e=>this.onSet(e,!1),onBlur:e=>this.onSet(e,!0)})}}const{React:IntPicker_React}=window;function clampInt(e,t,r,a,n){if(r){const e=Number(t);return isNaN(e)||e!==Math.floor(e)?a.toString():Math.min(n,Math.max(a,e)).toString()}return new RegExp("^[+-]?[0-9]*$").test(t)?t:e}const IntPicker_style={backgroundColor:COLOR.gray50,border:THEME.primaryBorder,borderRadius:"5px",boxShadow:"inset 0px 1px 4px -1px #000",height:"1.25em",padding:"5px",textAlign:"right",width:"3em"};class IntPicker extends IntPicker_React.Component{constructor(e){super(e),this.state={value:e.value}}onSet(e,t){const r=void 0===this.props.min?-Number.MAX_SAFE_INTEGER:this.props.min,a=void 0===this.props.max?Number.MAX_SAFE_INTEGER:this.props.max,n=clampInt(this.state.value,e.target.value,t,r,a);this.setState({value:n}),t&&this.props.onChange(parseInt(n))}componentWillReceiveProps(e){this.setState({value:e.value})}render(){const{customStyle:e,id:t}=this.props;return IntPicker_React.createElement("input",{style:Object.assign(Object.assign({},IntPicker_style),e),id:t,value:this.state.value,min:this.props.min,max:this.props.max,onChange:e=>this.onSet(e,!1),onBlur:e=>this.onSet(e,!0)})}}const{React:IconButton_React}=window;var BUTTON_MODE;!function(e){e[e.BLURRED=0]="BLURRED",e[e.HOVER=1]="HOVER",e[e.PRESSED=2]="PRESSED"}(BUTTON_MODE||(BUTTON_MODE={}));const IconButton_style={alignItems:"center",borderRadius:"0.5em",border:"none",display:"flex",height:"1.5em",justifyContent:"center",userSelect:"none",width:"1.5em",transition:"background-color 0.125s ease-in-out"},modeBackgroundColors={[BUTTON_MODE.BLURRED]:"#00000000",[BUTTON_MODE.HOVER]:"#00000066",[BUTTON_MODE.PRESSED]:"#00000033"};class IconButton extends IconButton_React.Component{constructor(e){super(e),this.state={mode:BUTTON_MODE.BLURRED}}render(){const{customStyle:e,disabled:t,icon:r,onClick:a,size:n,title:i}=this.props;return t&&this.state.mode!==BUTTON_MODE.BLURRED&&this.setState({mode:BUTTON_MODE.BLURRED}),IconButton_React.createElement("button",{title:i,style:Object.assign(Object.assign(Object.assign({},IconButton_style),e),{backgroundColor:modeBackgroundColors[this.state.mode],fontSize:n||"25px",color:t?COLOR.gray500:COLOR.gray950}),onMouseOver:()=>!t&&this.setState({mode:BUTTON_MODE.HOVER}),onMouseOut:()=>!t&&this.setState({mode:BUTTON_MODE.BLURRED}),onMouseDown:()=>!t&&this.setState({mode:BUTTON_MODE.PRESSED}),onMouseUp:()=>!t&&this.setState({mode:BUTTON_MODE.HOVER}),onClick:()=>a(),disabled:t},r)}}const{React:Dropdown_React}=window,styles={head:{backgroundColor:COLOR.gray50,border:THEME.primaryBorder,borderRadius:"5px",boxShadow:"0px 1px 4px -1px #000",cursor:"pointer",height:"1.5em",textAlign:"right"},option:{backgroundColor:COLOR.gray50,border:THEME.primaryBorder,height:"1.25em",textAlign:"center"}};function Dropdown({customStyle:e,value:t,mapping:r,label:a,onChange:n}){return Dropdown_React.createElement("select",{style:Object.assign(Object.assign({},styles.head),e),value:t,onChange:e=>n(parseInt(e.target.value))},...r.map(((e,t)=>Dropdown_React.createElement("option",{style:styles.option,value:e},a(e,t)))))}const{React:SkinEditor_React,store}=window,SkinEditor_styles={container:{alignItems:"center",backgroundColor:COLOR.gray100,boxShadow:"none",justifyContent:"center",overflow:"hidden",position:"relative",userSelect:"none",width:"100%"},gridBackground:{background:"linear-gradient(45deg, #aaa 25%, transparent 25%, transparent 75%, #aaa 75%), linear-gradient(-45deg, #aaa 25%, transparent 25%, transparent 75%, #aaa 75%)",backgroundSize:"10px 10px",height:"1000px",position:"absolute",transform:"rotate(45deg)",width:"1000px"},canvas:{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%"},outlineContainer:{alignItems:"center",bottom:"10px",display:"flex",position:"absolute",left:"10px"},outlineInput:{border:"1px solid black",borderRadius:"10px",height:"20px",marginLeft:"3px",width:"20px"},alphaContainer:{alignItems:"center",display:"flex",flexDirection:"column",fontSize:"0.75em",justifyContent:"center",position:"relative"},alphaSliderContainer:{alignItems:"center",display:"flex",position:"relative"},alphaSlider:{accentColor:"black",appearance:"none",background:"linear-gradient(to left, black, white)",border:THEME.primaryBorder,borderRadius:"5px",cursor:"move",height:"10px",marginTop:"3px",width:"100px"},colorPicker:{border:THEME.primaryBorder,borderRadius:"5px",cursor:"pointer",height:"1.5em",width:"1.5em"}};function SkinEditorToolbar({skinEditor:e,root:t}){const r=e.state.selectedColor.substring(0,7),a=parseInt(e.state.selectedColor.substring(7),16)/255;return SkinEditor_React.createElement("div",{style:GLOBAL_STYLES.windowHead},SkinEditor_React.createElement(IconButton,{onClick:()=>t.onResetSkin(e.state.selectedRider),icon:TRASH2,customStyle:{position:"absolute",right:"10px"},title:"Reset Skin"}),SkinEditor_React.createElement("div",{style:Object.assign(Object.assign({},GLOBAL_STYLES.spacedProperty),SkinEditor_styles.alphaContainer)},SkinEditor_React.createElement("label",{htmlFor:"alphaSlider"},"Transparency"),SkinEditor_React.createElement("div",{style:SkinEditor_styles.alphaSliderContainer},SkinEditor_React.createElement("input",{id:"alphaSlider",style:SkinEditor_styles.alphaSlider,type:"range",min:0,max:1,step:.01,value:a,onChange:t=>e.onChangeColor(void 0,t.target.value)}))),SkinEditor_React.createElement("input",{style:Object.assign(Object.assign({},GLOBAL_STYLES.spacedProperty),SkinEditor_styles.colorPicker),type:"color",value:r,onChange:t=>e.onChangeColor(t.target.value,void 0)}),SkinEditor_React.createElement(Dropdown,{customStyle:GLOBAL_STYLES.spacedProperty,value:e.state.selectedRider,mapping:[...Array(t.state.numRiders).keys()],label:(e,t)=>`Rider ${t+1}`,onChange:t=>e.onChooseRider(t)}))}const svgProps={flag:{transform:"translate(-5, -3)",d:"M6,3A1,1 0 0,1 7,4V4.88C8.06,4.44 9.5,4 11,4C14,4 14,6 16,6C19,6 20,4 20,4V12C20,12 19,14 16,14C13,14 13,12 11,12C8,12 7,14 7,14V21H5V4A1,1 0 0,1 6,3Z"},flagOutline:{transform:"translate(-5, -3)",d:"M6,3A1,1 0 0,1 7,4V4.88C8.06,4.44 9.5,4 11,4C14,4 14,6 16,6C19,6 20,4 20,4V12C20,12 19,14 16,14C13,14 13,12 11,12C8,12 7,14 7,14V21H5V4A1,1 0 0,1 6,3M7,7.25V11.5C7,11.5 9,10 11,10C13,10 14,12 16,12C18,12 18,11 18,11V7.5C18,7.5 17,8 16,8C14,8 13,6 11,6C9,6 7,7.25 7,7.25Z"},skin:{transform:"translate(13,8) rotate(-90)",width:"3.1",height:"4.5"},skin2:{strokeWidth:"0.3",transform:"translate(17.3,8.1) rotate(-90)",d:"M 0 -0.25 v 0.4 c 0.1 1.3 1.2 1.2 3.1 0 v -0.4"},hair:{transform:"translate(12.4, 5.15) rotate(-90)",width:"0.3",height:"5.1"},hair2:{transform:"translate(12.2, 8.1) rotate(-90)",width:"3.1",height:"0.3"},fill:{transform:"translate(12.2,4.2) scale(0.8,0.8)",width:"3.1",height:"4.8"},eye:{transform:"translate(16.3,6.7)",points:"0.4,-0.4 0,-0.5 -0.4,-0.4 -0.5,0 -0.4,0.4 0,0.5 0.4,0.4 0.5,0"},sled:{strokeWidth:"0.3",transform:"translate(9.7, 15.9) scale(1.04,1)",d:"M13.6-2.2c-1.35,0-2.55,0.75-3.15,1.85H0C-0.2-0.35-0.35-0.2-0.35,0S-0.2,0.35,0,0.35h1.75V4.4H-0.2c-0.2,0-0.35,0.15-0.35,0.35S-0.4,5.1-0.2,5.1h13.8c2,0,3.65-1.65,3.65-3.65S15.6-2.2,13.6-2.2zM9.05,4.4h-6.6V0.35h6.6V4.4z M13.6,4.4H9.75V0.35h0.35C10.05,0.5,10,0.7,10,0.9c0,0.2,0.15,0.35,0.35,0.35c0.15,0,0.3-0.1,0.35-0.25c0.05-0.2,0.1-0.45,0.2-0.65h0.9c0.2,0,0.35-0.15,0.35-0.35S12-0.35,11.8-0.35h-0.5c0.5-0.7,1.35-1.15,2.3-1.15c1.65,0,2.95,1.3,2.95,2.95C16.55,3.1,15.25,4.4,13.6,4.4z"},string:{transform:"translate(21.5, 10.5) rotate(40)",x1:"0",y1:"0",x2:"8",y2:"0",strokeWidth:"0.3"},hand:{strokeWidth:"0.3",transform:"translate(15, 10) rotate(5)",d:"M5-0.7h0.5c0,0,0.3-0.7,0.5-0.6c0.2,0.1,0,0.6,0,0.6s0.4,0,0.6,0c0.2,0,0.5,0.3,0.5,0.7c0,0.4-0.2,0.7-0.5,0.7c-0.5,0-1.6,0-1.6,0"},pants:{strokeWidth:"0.3",transform:"translate(15, 16) rotate(45)",d:"M4.8-0.7H0c-0.4,0-0.7,0.3-0.7,0.7S-0.4,0.7,0,0.7h4.8"},foot:{strokeWidth:"0.3",transform:"translate(15, 16) rotate(45)",d:"M4.8,0.7h2.4l0-2.7L6.7-2L6-0.7H4.8"},idScarf:{transform:"translate(10.5, 8.5)",strokeWidth:"0",width:"2",height:"2"},torso:{strokeWidth:"0.3",transform:"translate(16.9, 8.1) rotate(90)",width:"7.8",height:"4.4"},scarf:{transform:"translate(14.8, 15.2) rotate(-90)",width:"2",height:"1",strokeWidth:"0",x:"5.2"},hatTop:{strokeWidth:"0.3",transform:"translate(14.8,5) rotate(-90) translate(-10,0)",d:"M11-2.6h-0.4v5.2H11c1.2,0,2.2-1.2,2.2-2.6S12.2-2.6,11-2.6z"},hatBottom:{transform:"translate(14.8,5) rotate(-90) translate(-10,0)",strokeWidth:"1",strokeLinecap:"round",d:"M10.6-2.6 v5.2"},hatBall:{transform:"translate(14.8,5) rotate(-90) translate(-10,0)",cx:"13.9",cy:"0",r:"0.7"},sleeve:{strokeWidth:"0.3",transform:"translate(15, 10) rotate(5)",d:"M5,0.7H0c-0.4,0-0.7-0.3-0.7-0.7S-0.4-0.7,0-0.7h5"}};function SkinEditorCanvas({skinEditor:e,root:t,skinCss:r}){const a=r.outline.stroke,n=(r,a=!1)=>{t.onUpdateTrigger(e.state.selectedColor,["triggers",e.state.selectedRider.toString(),r,a?"stroke":"fill"])};return SkinEditor_React.createElement("div",{id:"skinElementContainer",style:Object.assign(Object.assign({},SkinEditor_styles.canvas),{transform:`scale(${e.state.zoom})`,transformOrigin:`${e.state.xOffset}px ${e.state.yOffset}px`}),onWheel:t=>e.onZoom(t)},SkinEditor_React.createElement("svg",{height:"18",width:"15",style:{transform:"scale(8)"}},SkinEditor_React.createElement("path",Object.assign({},svgProps.flag,{fill:r.flag.fill,onClick:()=>n("flag")})),SkinEditor_React.createElement("path",Object.assign({},svgProps.flagOutline,{fill:r.flag.fill,onClick:()=>n("flag")}))),SkinEditor_React.createElement("svg",{width:"200"}),SkinEditor_React.createElement("svg",{height:"25",width:"31",style:{transform:"scale(8)"}},SkinEditor_React.createElement("rect",Object.assign({},svgProps.skin,{fill:r.skin.fill,onClick:()=>n("skin")})),SkinEditor_React.createElement("path",Object.assign({},svgProps.skin2,{stroke:a,fill:r.skin.fill,onClick:()=>n("skin")})),SkinEditor_React.createElement("rect",Object.assign({},svgProps.hair,{fill:r.hair.fill,onClick:()=>n("hair")})),SkinEditor_React.createElement("rect",Object.assign({},svgProps.hair2,{fill:r.hair.fill,onClick:()=>n("hair")})),SkinEditor_React.createElement("rect",Object.assign({},svgProps.fill,{fill:r.fill.fill,onClick:()=>n("fill")})),SkinEditor_React.createElement("polygon",Object.assign({},svgProps.eye,{fill:r.eye.fill,onClick:()=>n("eye")})),SkinEditor_React.createElement("path",Object.assign({},svgProps.sled,{stroke:a,fill:r.sled.fill,onClick:()=>n("sled")})),SkinEditor_React.createElement("line",Object.assign({},svgProps.string,{stroke:r.string.stroke,onClick:()=>n("string",!0)})),SkinEditor_React.createElement("path",Object.assign({},svgProps.hand,{stroke:a,fill:r.armHand.fill,onClick:()=>n("armHand")})),SkinEditor_React.createElement("path",Object.assign({},svgProps.pants,{stroke:a,fill:r.legPants.fill,onClick:()=>n("legPants")})),SkinEditor_React.createElement("path",Object.assign({},svgProps.foot,{stroke:a,fill:r.legFoot.fill,onClick:()=>n("legFoot")})),SkinEditor_React.createElement("rect",Object.assign({},svgProps.idScarf,{x:"2",fill:r.id_scarf0.fill,onClick:()=>n("id_scarf0")})),SkinEditor_React.createElement("rect",Object.assign({},svgProps.idScarf,{x:"0",fill:r.id_scarf0.fill,onClick:()=>n("id_scarf0")})),SkinEditor_React.createElement("rect",Object.assign({},svgProps.idScarf,{x:"-2",fill:r.id_scarf1.fill,onClick:()=>n("id_scarf1")})),SkinEditor_React.createElement("rect",Object.assign({},svgProps.idScarf,{x:"-4",fill:r.id_scarf2.fill,onClick:()=>n("id_scarf2")})),SkinEditor_React.createElement("rect",Object.assign({},svgProps.idScarf,{x:"-6",fill:r.id_scarf3.fill,onClick:()=>n("id_scarf3")})),SkinEditor_React.createElement("rect",Object.assign({},svgProps.idScarf,{x:"-8",fill:r.id_scarf4.fill,onClick:()=>n("id_scarf4")})),SkinEditor_React.createElement("rect",Object.assign({},svgProps.idScarf,{x:"-10",fill:r.id_scarf5.fill,onClick:()=>n("id_scarf5")})),SkinEditor_React.createElement("rect",Object.assign({},svgProps.torso,{stroke:a,fill:r.torso.fill,onClick:()=>n("torso")})),SkinEditor_React.createElement("rect",Object.assign({},svgProps.scarf,{y:"1.5",fill:r.scarf1.fill,onClick:()=>n("scarf1")})),SkinEditor_React.createElement("rect",Object.assign({},svgProps.scarf,{y:"0.5",fill:r.scarf2.fill,onClick:()=>n("scarf2")})),SkinEditor_React.createElement("rect",Object.assign({},svgProps.scarf,{y:"-0.5",fill:r.scarf3.fill,onClick:()=>n("scarf3")})),SkinEditor_React.createElement("rect",Object.assign({},svgProps.scarf,{y:"-1.5",fill:r.scarf4.fill,onClick:()=>n("scarf4")})),SkinEditor_React.createElement("rect",Object.assign({},svgProps.scarf,{y:"-2.5",fill:r.scarf5.fill,onClick:()=>n("scarf5")})),SkinEditor_React.createElement("path",Object.assign({},svgProps.hatTop,{stroke:a,fill:r.hatTop.fill,onClick:()=>n("hatTop")})),SkinEditor_React.createElement("path",Object.assign({},svgProps.hatBottom,{stroke:r.hatBottom.stroke,onClick:()=>n("hatBottom",!0)})),SkinEditor_React.createElement("circle",Object.assign({},svgProps.hatBall,{fill:r.hatBall.fill,onClick:()=>n("hatBall")})),SkinEditor_React.createElement("path",Object.assign({},svgProps.sleeve,{stroke:a,fill:r.armSleeve.fill,onClick:()=>n("armSleeve")}))))}class SkinEditor extends SkinEditor_React.Component{constructor(e){super(e),this.state={selectedRider:0,selectedColor:"#000000ff",zoom:1,xOffset:0,yOffset:0},store.subscribe((()=>this.updateStore()))}updateStore(){const e=getNumRiders(store.getState());this.state.selectedRider>=e&&this.setState({selectedRider:e-1})}onChooseRider(e){this.setState({selectedRider:e})}onChangeColor(e,t){const{selectedColor:r}=this.state,a=null!=t?Math.round(255*Math.min(Math.max(parseFloat(t),0),1)).toString(16).padStart(2,"0"):r.substring(7),n=null!=e?e+a:r.substring(0,7)+a;this.setState({selectedColor:n})}onZoom(e){const{zoom:t,xOffset:r,yOffset:a}=this.state,n=document.getElementById("skinElementContainer").getBoundingClientRect(),i={zoom:t,xOffset:r,yOffset:a};t<4&&(i.xOffset=(e.clientX-n.x)/t,i.yOffset=(e.clientY-n.y)/t),i.zoom=Math.max(Math.min(t-.001*e.deltaY,4),1),this.setState(i)}render(){const{root:e,skinTriggers:t}=this.props;return SkinEditor_React.createElement(SkinEditor_React.Fragment,null,SkinEditor_React.createElement(SkinEditorToolbar,{skinEditor:this,root:e}),SkinEditor_React.createElement("div",{style:Object.assign(Object.assign({},GLOBAL_STYLES.windowBody),SkinEditor_styles.container)},SkinEditor_React.createElement("div",{style:SkinEditor_styles.gridBackground}),SkinEditor_React.createElement(SkinEditorCanvas,{skinEditor:this,root:e,skinCss:t[this.state.selectedRider]}),SkinEditor_React.createElement("div",{style:SkinEditor_styles.outlineContainer},SkinEditor_React.createElement("text",null,"Outline"),SkinEditor_React.createElement("div",{style:Object.assign(Object.assign({},SkinEditor_styles.outlineInput),{backgroundColor:t[this.state.selectedRider].outline.stroke}),onClick:()=>e.onUpdateTrigger(this.state.selectedColor,["triggers",this.state.selectedRider.toString(),"outline","stroke"])}))))}}const{React:FloatingButton_React}=window;var FloatingButton_BUTTON_MODE;!function(e){e[e.BLURRED=0]="BLURRED",e[e.PRESSED=1]="PRESSED"}(FloatingButton_BUTTON_MODE||(FloatingButton_BUTTON_MODE={}));const FloatingButton_style={border:THEME.primaryBorder,borderRadius:"5px",position:"relative"},modeShadows={[FloatingButton_BUTTON_MODE.BLURRED]:"0px 1px 4px -1px #000",[FloatingButton_BUTTON_MODE.PRESSED]:"none"};class FloatingButton extends FloatingButton_React.Component{constructor(e){super(e),this.state={mode:FloatingButton_BUTTON_MODE.BLURRED}}render(){const{active:e,customStyle:t,disabled:r,disabledShadow:a,label:n,onClick:i,tabButton:s}=this.props;return r&&this.state.mode!==FloatingButton_BUTTON_MODE.BLURRED&&this.setState({mode:FloatingButton_BUTTON_MODE.BLURRED}),FloatingButton_React.createElement("button",{style:Object.assign(Object.assign(Object.assign({},FloatingButton_style),t),{boxShadow:a?"none":modeShadows[this.state.mode],backgroundColor:!r&&e?COLOR.gray100:COLOR.gray400}),onMouseDown:()=>!r&&this.setState({mode:FloatingButton_BUTTON_MODE.PRESSED}),onMouseUp:()=>!r&&this.setState({mode:FloatingButton_BUTTON_MODE.BLURRED}),onClick:()=>i(),disabled:r},n,s&&!r&&e&&FloatingButton_React.createElement("div",{style:{backgroundColor:COLOR.gray100,bottom:"-3px",height:"4px",left:"0",position:"absolute",right:"0",zIndex:1}}))}}const{React:Settings_React}=window,Settings_styles={window:{backgroundColor:COLOR.gray100,border:THEME.primaryBorder,boxShadow:"0px 4px 8px -4px #000",display:"flex",flexDirection:"column",flex:9,position:"relative",width:"100%"},header:{alignItems:"center",display:"flex",justifyContent:"center",minHeight:"3em",margin:"10px",position:"relative"},applyButton:{left:"0px",position:"absolute"},row:{alignItems:"center",display:"flex",flexDirection:"row",height:"1.5em",minHeight:"3em",padding:"1em"},label:{position:"absolute",left:"5px"},parameter:{position:"absolute",right:"5px"}};function SettingsHeader({root:e,settings:t}){return Settings_React.createElement("div",{style:Object.assign(Object.assign({},Settings_styles.header),{fontSize:"1.5em"})},Settings_React.createElement(IconButton,{onClick:()=>e.onToggleSettings(),icon:X,customStyle:{position:"absolute",right:"0px"},title:"Close"}),"Settings",Settings_React.createElement(FloatingButton,{customStyle:Settings_styles.applyButton,active:t.state.dirty,disabled:!t.state.dirty,onClick:()=>t.onApply(),label:"Apply"}))}const LABEL_MAP={[SETTINGS_KEY.FONT_SIZE]:[[FONT_SIZE_SETTING.SMALL,"Small"],[FONT_SIZE_SETTING.MEDIUM,"Medium"],[FONT_SIZE_SETTING.LARGE,"Large"]],[SETTINGS_KEY.VIEWPORT]:[[VIEWPORT_SETTING.HD,"720p"],[VIEWPORT_SETTING.FHD,"1080p"],[VIEWPORT_SETTING.QHD,"1440p"],[VIEWPORT_SETTING.UHD,"4K"]]};function SettingsSection({current:e,onClick:t,title:r,lkey:a}){return Settings_React.createElement("div",{style:Settings_styles.row},Settings_React.createElement("text",{style:Settings_styles.label},r),Settings_React.createElement("div",{style:Settings_styles.parameter},...LABEL_MAP[a].map((([r,a])=>Settings_React.createElement(FloatingButton,{customStyle:{margin:"5px"},active:e===r,label:a,onClick:()=>t(r)})))))}class Settings extends Settings_React.Component{constructor(e){super(e),this.state={fontSize:getSetting(SETTINGS_KEY.FONT_SIZE),resolution:getSetting(SETTINGS_KEY.VIEWPORT),dirty:!1}}onChangeFontSize(e){const{fontSize:t}=this.state;e!==t&&this.setState({dirty:!0}),this.setState({fontSize:e})}onChangeViewport(e){const{resolution:t}=this.state;t!==e&&this.setState({dirty:!0}),this.setState({resolution:e})}onApply(){const{resolution:e,fontSize:t}=this.state,{root:r}=this.props;r.onApplyViewport(e),saveSetting(SETTINGS_KEY.FONT_SIZE,t),saveSetting(SETTINGS_KEY.VIEWPORT,e),r.setState({fontSize:t,resolution:e}),this.setState({dirty:!1})}render(){const{root:e}=this.props;return Settings_React.createElement("div",{style:Settings_styles.window},Settings_React.createElement(SettingsHeader,{root:e,settings:this}),Settings_React.createElement("div",null,Settings_React.createElement(SettingsSection,{current:this.state.fontSize,onClick:e=>this.onChangeFontSize(e),title:"Font Sizes",lkey:SETTINGS_KEY.FONT_SIZE}),Settings_React.createElement(SettingsSection,{current:this.state.resolution,onClick:e=>this.onChangeViewport(e),title:"Viewport",lkey:SETTINGS_KEY.VIEWPORT})))}}const{React:Checkbox_React}=window,Checkbox_styles={container:{alignItems:"center",display:"flex",height:"1.25em",justifyContent:"center",position:"relative",width:"1.25em"},primary:{appearance:"none",background:COLOR.gray50,border:THEME.primaryBorder,borderRadius:"50%",boxSizing:"border-box",boxShadow:"inset 0px 1px 4px -1px #000",cursor:"pointer",height:"100%",position:"absolute",width:"100%"},fill:{backgroundColor:"#000",borderRadius:"60%",height:"60%",pointerEvents:"none",position:"absolute",transition:"opacity 0.125s ease-in-out",width:"60%"}};function Checkbox({customStyle:e,id:t,value:r,onCheck:a}){return Checkbox_React.createElement("div",{style:Object.assign(Object.assign({},Checkbox_styles.container),e)},Checkbox_React.createElement("input",{id:t,style:Checkbox_styles.primary,type:"checkbox",onChange:()=>a()}),Checkbox_React.createElement("div",{style:Object.assign(Object.assign({},Checkbox_styles.fill),{opacity:r?"100":"0"})}))}var __awaiter=function(e,t,r,a){return new(r||(r=Promise))((function(n,i){function s(e){try{g(a.next(e))}catch(e){i(e)}}function o(e){try{g(a.throw(e))}catch(e){i(e)}}function g(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,o)}g((a=a.apply(e,t||[])).next())}))};const{store:App_store,React:App_React}=window;class App extends App_React.Component{constructor(e){super(e),this.triggerManager=new TriggerDataManager.G1,this.state={active:!1,activeTab:TriggerDataManager_types.n.ZOOM,triggerUpdateFlag:!1,numRiders:1,layerMap:[0],focusDropdown:0,gravityDropdown:0,layerDropdown:0,settingsActive:!1,fontSize:getSetting(SETTINGS_KEY.FONT_SIZE),resolution:getSetting(SETTINGS_KEY.VIEWPORT),invalidTimes:[]},App_store.subscribe((()=>this.updateStore()))}componentDidMount(){window.saveCommands=()=>this.onDownload()}updateStore(e=!1){const t=getNumRiders(App_store.getState()),r={};if(e||this.state.numRiders!==t){const{focusDropdown:e,gravityDropdown:a}=this.state;t>0?(this.triggerManager.updateRiderCount(t),r.triggerUpdateFlag=!this.state.triggerUpdateFlag,r.focusDropdown=Math.min(t-1,e),r.gravityDropdown=Math.min(t-1,a)):[TriggerDataManager_types.n.FOCUS,TriggerDataManager_types.n.GRAVITY,TriggerDataManager_types.n.SKIN].includes(this.state.activeTab)&&(r.activeTab=TriggerDataManager_types.n.ZOOM),r.numRiders=t}const a=getLayerIds(App_store.getState());if(e||this.state.layerMap.length!==a.length){const{layerDropdown:e}=this.state;this.triggerManager.updateLayerMap(a),r.triggerUpdateFlag=!this.state.triggerUpdateFlag,a.includes(e)||(r.layerDropdown=a[0]),r.layerMap=a}getSidebarOpen(App_store.getState())&&(r.active=!1),this.setState(r)}onCreateTrigger(e){const{activeTab:t,gravityDropdown:r,layerDropdown:a}=this.state;if(t===TriggerDataManager_types.n.SKIN)return;const n=getPlayerIndex(App_store.getState()),i=[Math.floor(n/2400),Math.floor(n%2400/40),Math.floor(n%40)],s=(0,util.Z3)(this.triggerManager.data,t,r,a),o=structuredClone(s[e]);o[0]=i;const g=s.slice(0,e+1).concat([o]).concat(s.slice(e+1)),l=t===TriggerDataManager_types.n.GRAVITY?[t,"triggers",r.toString()]:t===TriggerDataManager_types.n.LAYER?[t,"triggers",a.toString()]:[t,"triggers"];this.triggerManager.updateFromPath(l,g,t),this.setState({triggerUpdateFlag:!this.state.triggerUpdateFlag}),this.setState({invalidTimes:(0,util.P)(g)})}onUpdateTrigger(e,t){const{activeTab:r,gravityDropdown:a,layerDropdown:n}=this.state;if(this.triggerManager.updateFromPath([r,...t],e,r),this.setState({triggerUpdateFlag:!this.state.triggerUpdateFlag}),r!==TriggerDataManager_types.n.SKIN){const e=(0,util.Z3)(this.triggerManager.data,r,a,n);this.setState({invalidTimes:(0,util.P)(e)})}}onDeleteTrigger(e){const{activeTab:t,gravityDropdown:r,layerDropdown:a}=this.state;if(t===TriggerDataManager_types.n.SKIN)return;const n=(0,util.Z3)(this.triggerManager.data,t,r,a),i=n.slice(0,e).concat(n.slice(e+1)),s=t===TriggerDataManager_types.n.GRAVITY?[t,"triggers",r.toString()]:t===TriggerDataManager_types.n.LAYER?[t,"triggers",a.toString()]:[t,"triggers"];this.triggerManager.updateFromPath(s,i,t),this.setState({triggerUpdateFlag:!this.state.triggerUpdateFlag}),this.setState({invalidTimes:(0,util.P)(i)})}onDownload(){const e=JSON.stringify(writeJsonScript(this.triggerManager.data)),t=document.createElement("a"),r="data:text/json;charset=utf-8,"+encodeURIComponent(e);t.setAttribute("href",r),t.setAttribute("download",getTrackTitle(App_store.getState())+".script.json"),t.click(),t.remove()}onUpload(){const e=document.getElementById("trigger-file-upload");e.value="",e.click()}onLoadFile(e){const t=new window.FileReader;t.onload=()=>{try{this.onLoad(readJsonScript(JSON.parse(t.result),this.triggerManager.data))}catch(e){e instanceof Error&&console.error(`[Root.onLoadFile()] Failed to load file: ${e.message}`)}},t.readAsText(e)}onLoadScript(){this.onLoad((0,read_js_script.A)(getCurrentScript(App_store.getState()),this.triggerManager.data))}onLoad(e){const{activeTab:t,gravityDropdown:r,layerDropdown:a}=this.state;try{if(TriggerDataManager.p6.forEach((r=>{this.triggerManager.updateFromPath([r],e[r],t)})),this.updateStore(!0),t!==TriggerDataManager_types.n.SKIN){const n=(0,util.Z3)(e,t,r,a);this.setState({invalidTimes:(0,util.P)(n)})}this.setState({triggerUpdateFlag:!this.state.triggerUpdateFlag})}catch(e){e instanceof Error&&console.error(`[Root.onLoad()] ${e.message}`)}}onTest(){const{activeTab:e,invalidTimes:t}=this.state;try{if(!t.every((e=>!e)))throw new Error("Triggers contain invalid times!");switch(e){case TriggerDataManager_types.n.ZOOM:{const e=this.triggerManager.data[TriggerDataManager_types.n.ZOOM];window.getAutoZoom=window.createZoomer(e.triggers,e.smoothing);break}case TriggerDataManager_types.n.PAN:{const e=this.triggerManager.data[TriggerDataManager_types.n.PAN];window.getCamBounds=window.createBoundsPanner(e.triggers,e.smoothing);break}case TriggerDataManager_types.n.FOCUS:{const e=this.triggerManager.data[TriggerDataManager_types.n.FOCUS];window.getCamFocus=window.createFocuser(e.triggers,e.smoothing);break}case TriggerDataManager_types.n.TIME:{const e=this.triggerManager.data[TriggerDataManager_types.n.TIME];window.timeRemapper=window.createTimeRemapper(e.triggers,e.interpolate);break}case TriggerDataManager_types.n.SKIN:{const e=this.triggerManager.data[TriggerDataManager_types.n.SKIN];window.setCustomRiders((0,util.Qx)(e.triggers));break}case TriggerDataManager_types.n.GRAVITY:{const e=this.triggerManager.data[TriggerDataManager_types.n.GRAVITY];window.setCustomGravity(e.triggers);break}case TriggerDataManager_types.n.LAYER:{const e=this.triggerManager.data[TriggerDataManager_types.n.LAYER];window.getLayerVisibleAtTime=window.createLayerAutomator(e.triggers,e.interpolate);break}}}catch(e){e instanceof Error&&console.error(`[Root.onTest()] ${e.message}`)}}onCopy(){return __awaiter(this,void 0,void 0,(function*(){const{activeTab:e,invalidTimes:t}=this.state;try{if(!t.every((e=>!e)))throw new Error("Triggers contain invalid times!");const r=(0,util.hw)(e,this.triggerManager.data);return yield navigator.clipboard.writeText(r)}catch(e){e instanceof Error&&console.error(`[Root.onCopy()] ${e.message}`)}}))}onUndo(){const{activeTab:e,gravityDropdown:t,layerDropdown:r}=this.state,a=this.triggerManager.undo();if(this.setState({triggerUpdateFlag:!this.state.triggerUpdateFlag}),e!==a&&this.setState({activeTab:a}),a!==TriggerDataManager_types.n.SKIN){const e=(0,util.Z3)(this.triggerManager.data,a,t,r);this.setState({invalidTimes:(0,util.P)(e)})}}onRedo(){const{activeTab:e,gravityDropdown:t,layerDropdown:r}=this.state,a=this.triggerManager.redo();if(this.setState({triggerUpdateFlag:!this.state.triggerUpdateFlag}),e!==a&&this.setState({activeTab:a}),a!==TriggerDataManager_types.n.SKIN){const e=(0,util.Z3)(this.triggerManager.data,a,t,r);this.setState({invalidTimes:(0,util.P)(e)})}}onResetSkin(e){this.triggerManager.updateFromPath([TriggerDataManager_types.n.SKIN,"triggers",e.toString()],structuredClone(TriggerDataManager.BC[TriggerDataManager_types.n.SKIN].TEMPLATE),TriggerDataManager_types.n.SKIN),this.setState({triggerUpdateFlag:!this.state.triggerUpdateFlag})}onToggleActive(){const{active:e}=this.state,t=getSidebarOpen(App_store.getState());!e&&t&&App_store.dispatch(closeSidebar()),this.setState({active:!e})}onChangeTab(e){const{gravityDropdown:t,layerDropdown:r}=this.state;if(this.setState({activeTab:e}),e!==TriggerDataManager_types.n.SKIN){const a=(0,util.Z3)(this.triggerManager.data,e,t,r);this.setState({invalidTimes:(0,util.P)(a)})}}onToggleSettings(){const{settingsActive:e}=this.state;this.setState({settingsActive:!e})}onHelp(){window.open("https://github.com/Malizma333/line-rider-command-editor-userscript#readme")}onApplyViewport(e){const t={[VIEWPORT_SETTING.HD]:{width:1280,height:720},[VIEWPORT_SETTING.FHD]:{width:1920,height:1080},[VIEWPORT_SETTING.QHD]:{width:2560,height:1440},[VIEWPORT_SETTING.UHD]:{width:3840,height:2160}},r=Math.log2(t[e].width/t[this.state.resolution].width);App_store.dispatch(setPlaybackDimensions(t[e]));const a=this.triggerManager.data[TriggerDataManager_types.n.ZOOM].triggers.map((e=>[e[0],Math.round(1e7*(e[1]+r+Number.EPSILON))/1e7]));this.triggerManager.updateFromPath([TriggerDataManager_types.n.ZOOM,"triggers"],a,TriggerDataManager_types.n.ZOOM),this.setState({triggerUpdateFlag:!this.state.triggerUpdateFlag})}onChangeFocusDD(e){this.setState({focusDropdown:e})}onChangeGravityDD(e){this.setState({gravityDropdown:e}),this.setState({invalidTimes:(0,util.P)(this.triggerManager.data[TriggerDataManager_types.n.GRAVITY].triggers[e])})}onChangeLayerDD(e){this.setState({layerDropdown:e}),this.setState({invalidTimes:(0,util.P)(this.triggerManager.data[TriggerDataManager_types.n.LAYER].triggers[e])})}onCaptureCamera(e,t){switch(t){case TriggerDataManager_types.n.ZOOM:this.onUpdateTrigger(Math.log2(getEditorZoom(App_store.getState())),["triggers",e.toString(),"1"]);break;case TriggerDataManager_types.n.PAN:{const{x:t,y:r}=getEditorPosition(App_store.getState()),a=getSimulatorTrack(App_store.getState()),{width:n,height:i}=getPlaybackDimensions(App_store.getState()),s=getPlaybackZoom(App_store.getState()),o=Math.floor(getPlayerIndex(App_store.getState())),g=App_store.getState().camera.playbackFollower.getCamera(a,{zoom:s,width:n,height:i},o);this.onUpdateTrigger((t-g.x)*s/n,["triggers",e.toString(),"1","x"]),this.onUpdateTrigger((r-g.y)*s/i,["triggers",e.toString(),"1","y"]);break}}}render(){const{activeTab:e,gravityDropdown:t,layerDropdown:r}=this.state;return App_React.createElement("div",{style:{fontSize:TEXT_SIZES[this.state.fontSize],transition:"font-size 0.125s ease-in-out"}},this.renderActions(),this.state.active&&App_React.createElement("div",{style:GLOBAL_STYLES.mainContent},this.state.settingsActive?App_React.createElement(Settings,{root:this}):App_React.createElement("div",{style:GLOBAL_STYLES.windowContainer},this.renderTabContainer(),e===TriggerDataManager_types.n.SKIN?App_React.createElement(SkinEditor,{root:this,skinTriggers:this.triggerManager.data[TriggerDataManager_types.n.SKIN].triggers}):App_React.createElement(App_React.Fragment,null,this.renderWindowHead(),App_React.createElement("div",{style:Object.assign(Object.assign({},GLOBAL_STYLES.windowBody),{paddingBottom:"10px"})},(0,util.Z3)(this.triggerManager.data,e,t,r).map(((e,t)=>this.renderTrigger(e,t))))))))}renderActions(){return this.state.active?App_React.createElement("div",{style:GLOBAL_STYLES.actionContainer},App_React.createElement("div",{style:Object.assign(Object.assign({},GLOBAL_STYLES.actionContainer),{justifyContent:"start"})},App_React.createElement(IconButton,{title:"Minimize",onClick:()=>this.onToggleActive(),icon:MINIMIZE}),App_React.createElement(IconButton,{title:"Download",onClick:()=>this.onDownload(),icon:DOWNLOAD}),App_React.createElement(IconButton,{title:"Upload",onClick:()=>this.onUpload(),icon:UPLOAD}),App_React.createElement(IconButton,{title:"Load From Script",onClick:()=>this.onLoadScript(),icon:CORNER_UP_RIGHT,disabled:this.state.activeTab===TriggerDataManager_types.n.GRAVITY||this.state.activeTab===TriggerDataManager_types.n.LAYER}),App_React.createElement(IconButton,{title:"Run",onClick:()=>this.onTest(),icon:PLAY,disabled:this.state.invalidTimes.some((e=>e))}),App_React.createElement(IconButton,{title:"Copy Script",onClick:()=>__awaiter(this,void 0,void 0,(function*(){return yield this.onCopy()})),icon:COPY,disabled:this.state.activeTab===TriggerDataManager_types.n.GRAVITY||this.state.activeTab===TriggerDataManager_types.n.LAYER})),App_React.createElement("div",{style:Object.assign(Object.assign({},GLOBAL_STYLES.actionContainer),{justifyContent:"end"})},App_React.createElement(IconButton,{title:"Undo",onClick:()=>this.onUndo(),icon:ARROW_LEFT,disabled:0===this.triggerManager.undoLen}),App_React.createElement(IconButton,{title:"Redo",onClick:()=>this.onRedo(),icon:ARROW_RIGHT,disabled:0===this.triggerManager.redoLen}),App_React.createElement(IconButton,{title:"Settings",onClick:()=>this.onToggleSettings(),icon:SETTINGS}),App_React.createElement(IconButton,{title:"Help",onClick:()=>this.onHelp(),icon:HELP_CIRCLE})),App_React.createElement("input",{id:"trigger-file-upload",style:{display:"none"},type:"file",accept:".json",onChange:e=>this.onLoadFile(e.target.files[0])})):App_React.createElement("div",{style:GLOBAL_STYLES.actionContainer},App_React.createElement(IconButton,{title:"Maximize",onClick:()=>this.onToggleActive(),icon:MAXIMIZE}))}renderTabContainer(){return App_React.createElement("div",{style:GLOBAL_STYLES.tabContainer},...TriggerDataManager.p6.map((e=>0===this.state.numRiders&&[TriggerDataManager_types.n.FOCUS,TriggerDataManager_types.n.GRAVITY,TriggerDataManager_types.n.SKIN].includes(e)?null:App_React.createElement("div",null,App_React.createElement(FloatingButton,{customStyle:GLOBAL_STYLES.tabButton,onClick:()=>this.onChangeTab(e),active:this.state.activeTab===e,label:TriggerDataManager.BC[e].DISPLAY_NAME,disabledShadow:!0,tabButton:!0})))))}renderWindowHead(){const{data:e}=this.triggerManager,{activeTab:t}=this.state;return App_React.createElement("div",{style:GLOBAL_STYLES.windowHead},t===TriggerDataManager_types.n.ZOOM&&App_React.createElement(App_React.Fragment,null,this.renderFloatPicker({label:"Smoothing",value:e[t].smoothing.toString(),path:["smoothing"],min:0})),t===TriggerDataManager_types.n.PAN&&App_React.createElement(App_React.Fragment,null,this.renderFloatPicker({label:"Smoothing",value:e[t].smoothing.toString(),path:["smoothing"],min:0})),t===TriggerDataManager_types.n.FOCUS&&App_React.createElement(App_React.Fragment,null,this.renderFloatPicker({label:"Smoothing",value:e[t].smoothing.toString(),path:["smoothing"],min:0}),App_React.createElement(Dropdown,{customStyle:{margin:"0em .25em"},value:this.state.focusDropdown,mapping:[...Array(this.state.numRiders).keys()],label:(e,t)=>`Rider ${t+1}`,onChange:e=>this.onChangeFocusDD(e)})),t===TriggerDataManager_types.n.TIME&&App_React.createElement(App_React.Fragment,null,this.renderBoolPicker("Smoothing",e[t].interpolate,["interpolate"])),t===TriggerDataManager_types.n.GRAVITY&&App_React.createElement(App_React.Fragment,null,App_React.createElement(Dropdown,{customStyle:{margin:"0em .25em"},value:this.state.gravityDropdown,mapping:[...Array(this.state.numRiders).keys()],label:(e,t)=>`Rider ${t+1}`,onChange:e=>this.onChangeGravityDD(e)})),t===TriggerDataManager_types.n.LAYER&&App_React.createElement(App_React.Fragment,null,App_React.createElement(Dropdown,{customStyle:{margin:"0em .25em"},value:this.state.layerDropdown,mapping:this.state.layerMap,label:e=>`Layer ${e}`,onChange:e=>this.onChangeLayerDD(e)}),this.renderBoolPicker("60 FPS",e[t].interpolate,["interpolate"])))}renderTrigger(e,t){const{activeTab:r}=this.state;return App_React.createElement("div",{style:Object.assign(Object.assign({},GLOBAL_STYLES.triggerContainer),{fontSize:"1.5em"})},App_React.createElement("div",{style:GLOBAL_STYLES.triggerActionContainer},(r===TriggerDataManager_types.n.ZOOM||r===TriggerDataManager_types.n.PAN)&&App_React.createElement(IconButton,{onClick:()=>this.onCaptureCamera(t,r),icon:CAMERA,title:"Capture Editor Camera"}),App_React.createElement(IconButton,{onClick:()=>this.onDeleteTrigger(t),icon:X,disabled:0===t,title:"Delete"})),this.renderTimeInput(e[0],t),r===TriggerDataManager_types.n.ZOOM&&this.renderZoomTrigger(e,t),r===TriggerDataManager_types.n.PAN&&this.renderPanTrigger(e,t),r===TriggerDataManager_types.n.FOCUS&&this.renderFocusTrigger(e,t),r===TriggerDataManager_types.n.TIME&&this.renderRemapTrigger(e,t),r===TriggerDataManager_types.n.GRAVITY&&this.renderGravityTrigger(e,t),r===TriggerDataManager_types.n.LAYER&&this.renderLayerTrigger(e,t),App_React.createElement("div",{style:GLOBAL_STYLES.createTriggerContainer},App_React.createElement(FloatingButton,{onClick:()=>this.onCreateTrigger(t),customStyle:{fontSize:"0.75em"},label:"+",active:!0})))}renderTimeInput(e,t){const r=this.state.activeTab===TriggerDataManager_types.n.GRAVITY?["triggers",this.state.gravityDropdown.toString()]:this.state.activeTab===TriggerDataManager_types.n.LAYER?["triggers",this.state.layerDropdown.toString()]:["triggers"];return App_React.createElement("div",{style:GLOBAL_STYLES.triggerPropContainer},...[{id:"0",label:"Time",min:0,max:999},{id:"1",label:":",min:0,max:59},{id:"2",label:":",min:0,max:39}].map((a=>{const n=r.concat([t.toString(),"0",a.id]);return App_React.createElement("div",null,this.renderIntPicker({label:a.label,value:e[parseInt(a.id)].toString(),path:n,min:a.min,max:a.max,customStyle:{color:this.state.invalidTimes[t]?"red":GLOBAL_STYLES.root.color}}))})))}renderZoomTrigger(e,t){const r=["triggers",t.toString(),"1"];return App_React.createElement("div",{style:GLOBAL_STYLES.triggerPropContainer},this.renderFloatPicker({label:"Zoom To",value:e[1].toString(),path:r}))}renderPanTrigger(e,t){const r=[[{id:"w",label:"Width",min:0},{id:"h",label:"Height",min:0}],[{id:"x",label:"Offset X",min:-Number.MAX_VALUE},{id:"y",label:"Offset Y",min:-Number.MAX_VALUE}]];return App_React.createElement("div",null,...r.map((r=>App_React.createElement("div",{style:{display:"flex",flexDirection:"row"}},...r.map((r=>{const a=["triggers",t.toString(),"1",r.id];return App_React.createElement("div",{style:GLOBAL_STYLES.triggerPropContainer},this.renderFloatPicker({label:r.label,value:e[1][r.id].toString(),path:a,min:r.min}))}))))))}renderFocusTrigger(e,t){const r=["triggers",t.toString(),"1",this.state.focusDropdown.toString()];return App_React.createElement("div",{style:GLOBAL_STYLES.triggerPropContainer},this.renderFloatPicker({label:"Weight",value:e[1][this.state.focusDropdown].toString(),path:r,min:0}))}renderRemapTrigger(e,t){const r=["triggers",t.toString(),"1"];return App_React.createElement("div",{style:GLOBAL_STYLES.triggerPropContainer},this.renderFloatPicker({label:"Speed",value:e[1].toString(),path:r,min:.001}))}renderGravityTrigger(e,t){return App_React.createElement("div",{style:{display:"flex",flexDirection:"row"}},...[{id:"x",label:"X"},{id:"y",label:"Y"}].map((r=>{const a=["triggers",this.state.gravityDropdown.toString(),t.toString(),"1",r.id];return App_React.createElement("div",{style:GLOBAL_STYLES.triggerPropContainer},this.renderFloatPicker({label:r.label,value:e[1][r.id].toString(),path:a}))})))}renderLayerTrigger(e,t){return App_React.createElement("div",{style:{display:"flex",flexDirection:"row"}},...[{id:"on",label:"ON"},{id:"off",label:"OFF"},{id:"offset",label:"OFFSET"}].map((r=>{const a=["triggers",this.state.layerDropdown.toString(),t.toString(),"1",r.id];return App_React.createElement("div",{style:GLOBAL_STYLES.triggerPropContainer},this.renderIntPicker({label:r.label,value:e[1][r.id].toString(),path:a,min:0}))})))}renderBoolPicker(e,t,r){return App_React.createElement("div",{style:GLOBAL_STYLES.triggerRowContainer},App_React.createElement("label",{style:GLOBAL_STYLES.spacedProperty,htmlFor:r.join("-")},e),App_React.createElement(Checkbox,{customStyle:GLOBAL_STYLES.spacedProperty,id:r.join("-"),value:t,onCheck:()=>this.onUpdateTrigger(!t,r)}))}renderIntPicker({label:e,value:t,path:r,min:a,max:n,customStyle:i}){return App_React.createElement("div",{style:GLOBAL_STYLES.triggerRowContainer},App_React.createElement("label",{style:GLOBAL_STYLES.spacedProperty,htmlFor:r.join("-")},e),App_React.createElement(IntPicker,{customStyle:Object.assign(Object.assign({},GLOBAL_STYLES.spacedProperty),i),id:r.join("-"),value:t,min:a,max:n,onChange:e=>this.onUpdateTrigger(e,r)}))}renderFloatPicker({label:e,value:t,path:r,min:a,max:n,customStyle:i}){return App_React.createElement("div",{style:GLOBAL_STYLES.triggerRowContainer},App_React.createElement("label",{style:GLOBAL_STYLES.spacedProperty,htmlFor:r.join("-")},e),App_React.createElement(FloatPicker,{customStyle:Object.assign(Object.assign({},GLOBAL_STYLES.spacedProperty),i),id:r.join("-"),value:t,min:a,max:n,onChange:e=>this.onUpdateTrigger(e,r)}))}}function main(){const{React:e,store:t}=window,r=document.getElementById("content"),a=document.createElement("div");Object.assign(a.style,GLOBAL_STYLES.root),window.ReactDOM.render(e.createElement(App),a),r.appendChild(a),t.subscribe((()=>{const e=getPlayerRunning(t.getState()),r=getWindowFocused(t.getState()),n=window.CMD_EDITOR_DEBUG||!e&&r;a.style.opacity=n?"1":"0",a.style.pointerEvents=n?"auto":"none"}));const n=setInterval((()=>{const e=r.querySelector('div[style="margin: 16px;"]');if(e){const t=e.querySelector("h1");t&&"An error occurred!"===t.innerHTML&&(console.warn("[index.main()] Crash detected..."),window.saveCommands(),clearInterval(n))}}),1e3)}if(window.store)main();else{const e=window.onAppReady;window.onAppReady=()=>{e&&e(),main()}}})();